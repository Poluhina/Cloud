# Лабораторная работа №3. Облачные сети

# Цели работы
Научиться вручную создавать виртуальную сеть (VPC) в AWS, добавлять в неё подсети, таблицы маршрутов, интернет-шлюз (IGW) и NAT Gateway, а также настраивать взаимодействие между веб-сервером в публичной подсети и сервером базы данных в приватной.

# Шаг 1. Подготовка среды
Вошла в AWS Management Console.

Регион установлен на Frankfurt (eu-central-1).

В строке поиска ввела VPC и открыла консоль.

# Шаг 2. Создание VPC
В панеле Your VPCs → Create VPC.
Указала:

Name tag: student-vpc-kXX (где XX - порядковый номер)

IPv4 CIDR block: 10.(k%30).0.0/16

Tenancy: Default

Далее Create VPC.

<img width="1485" height="434" alt="image" src="https://github.com/user-attachments/assets/8571bd8e-8767-4e57-8684-fcd8fc83d8fa" />
Скриншот того, что была создана виртуальная частная сеть с индивидуальным диапазоном IP-адресов.

# Шаг 3. Создание Internet Gateway (IGW)
В левой панели выбрала Internet Gateways → Create internet gateway.

Указала имя: student-igw-kXX.

Теперь нужно “прикрепить” (Attach) шлюз к моей сети:

Выбрала созданный IGW.

Нажала Actions → Attach to VPC.

В списке выбрала student-vpc-kXX.

<img width="1368" height="345" alt="image" src="https://github.com/user-attachments/assets/8139c3f2-577a-4c22-8d2e-54b05f616154" />
Скриншот того, что моей виртуальной сети открыт доступ в Интернет.

# Шаг 4. Создание подсетей
Создание подсетей в AWS VPC

<img width="1249" height="114" alt="image" src="https://github.com/user-attachments/assets/d2646341-d2ca-4075-bf37-81f10077c6fc" />

На данном этапе была создана виртуальная, частная сеть VPC student-vpc-k05 с адресным диапазоном 10.5.0.0/16.

Внутри нее добавлены две подсети: 
- student-subnet-k05
- publlic-subnet-k05

Эти две подсети находятся в регионе eu-central-1 (Frankfurt) и имеют статус Available, что подтверждает успешное создание.

Эти подсети будут использоваться для размещения публичных и приватныых ресурсов в инфраструктуре AWS.

# Шаг 5. Таблицы маршрутов
<img width="1626" height="439" alt="image" src="https://github.com/user-attachments/assets/ac680ed6-b355-4f9f-b6e8-d4706292f968" />

На этом этапе была добавлена запись маршрутизации для выхода в интернет. В таблицу маршрутов, связанную с моей VPC(student-vpc-k05), был добавлен маршрут с направлением 0.0.0.0/0, указывающий на Intertnet Gateway(student-igw-k05). Это обеспечивает доступ ресурсов внутри VPC к сети Интернет.

# Шаг 6. Создание NAT Gateway
<img width="1227" height="245" alt="image" src="https://github.com/user-attachments/assets/e282482c-f930-4ae2-b301-ea99d20757ab" />

<img width="1641" height="579" alt="image" src="https://github.com/user-attachments/assets/4e552775-a273-419b-a42e-1cad199eb733" />

<img width="1499" height="494" alt="image" src="https://github.com/user-attachments/assets/0ba2dd0a-3f22-45ff-a1f4-381abe725bb4" />

На скриншоте показана приватная таблица маршрутов private-rt-k05 после изменения маршрута 0.0.0.0/0. Трафик из приватной подсети теперь направляется через NAT Gateway nat-gateway-k05, что позволяет EC2-инстансам выходитьь в Интернет для обновлений , при этом остоваясь недоступными извне.

# Шаг 7. Создание Security Groups
<img width="1647" height="518" alt="image" src="https://github.com/user-attachments/assets/1a51db38-708a-4d45-90e6-7340496b6c24" />

На скриншоте представлена группа безопасности web-sg-k05, созданная для веб-сервера. Добавлены правила для подключения по HTTP (порт 80) и HTTPS (порт 443) из любых источников (0.0.0.0/0) Эта Security Group обеспечивает доступ для пользователей к веб-приложению, размещенному в публичной подсети.

<img width="1656" height="463" alt="image" src="https://github.com/user-attachments/assets/6f0b35a6-23ae-44fa-99f9-54b1553e6331" />

На скриншоте показана группа безопасности bastion-sg-k05, предназначенная для bastion host. В ней добавлены подключения по SSH (порт 22) только с моего IP-адреса и это обеспечивает безопасный удаленный доступ к приватным ресурсам без открытия в Интернет. bastion host используется как точка ддля входа администрирования приватных инстансов.

<img width="1650" height="528" alt="image" src="https://github.com/user-attachments/assets/12032679-cb38-4265-9def-ce911ce6a0c5" />

На скриншоте показана группа безопасности db-sg-k05, созданная для базы данных. Добавлены правила доступа, подключение к MySQL (порт 3306) с веб-сервера (web-sg-k05) и bastion host (bastion-sg-k05), и подключение по SSH (порт 22) только с bastion-sg-k05. Это обеспечивает доступ к базе данных только с доверенных источников внутри VPC.

# Шаг 8. Создание EC2-инстансов



















# Контрольные вопросы

1. Что обозначает маска /16? И почему нельзя использовать, например, /8?

/16 означает, что первые 16 бит это сеть. Оставшиеся 16 бит это адреса внутри этой сети. Нельзя использовать /8 потому, что он бы дал 16777216 адресов. Это достаточно большой диапозон, который обычно AWS не разрешает ипользоать для одной VPC. А /16 дает 65536 адресов в VPC.
   
2. Является ли подсеть "публичной" на данный момент? Почему?

Нет. Подсеть сама по себе это просто диапозон адресов, чтобы она стала публичной в ссысле выхода в интренет, наддо связать ее  с таблицей маршрутов, в которой есть маршрут 0.0.0.0/0

3. Зачем необходимо привязать таблицу маршрутов к подсети?

Таблицу необходимо привязывать потому, что маршруты применяются к подсети через ассоциацию. Она определяет какая подсеть использует эту таблицу маршрутов. Без привязки подсеть будет использовать основную таблицу VPC.
   
5. Что такое Bastion Host и зачем он нужен в архитектуре с приватными подсетями?

